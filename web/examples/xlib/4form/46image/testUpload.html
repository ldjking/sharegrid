<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>upload_new.html</title>

		<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
		<meta http-equiv="description" content="this is my page">
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">

		<!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
		<style type="text/css">
.upload {
	background-image:url(../../../../images/appIcon/caigou.png);
	background-repeat:no-repeat;
	overflow: hidden;
	position:relative;
	width:200px;
	height:200px;
	background-color:red
}
.upload input {
	cursor:default;
	opacity: 0;
	filter:alpha(opacity=0);
	height:200px;
	right: 0px;
	position: absolute;
}
        </style>

	</head>

	<body>
		<div class="upload" id="c11"><input type="file" id="file" name="filename"  /></div>
		 <!--<script type="text/javascript" src="../../../../release/base.js"></script> onChange="ajaxUpload(this)"-->
       <script type="text/javascript" src="../../../../src/1base/20upload.js"></script>
		<script type="text/javascript">
		 
				
			document.getElementById("file").cfg={url:"http://10.68.105.140/eam/upload"};
			document.getElementById("file").onchange=ajaxUpload;
		//bind($("#file"),"change",ajaxUpload);
			  var onmessage = function(e) {
				  alert(1);
				  var result = eval("("+e.data+")");    
				  var origin = e.origin;  
				  var c11=document.getElementById("c11");  
				  var url="url(http://localhost"+result.data.imgSrc+")";
				  alert(url);
				  c11.style.backgroundImage=url;
				  c11.style.backgroundSize="100% 100%";
				  //alert("接收数据"+data);
				  //document.getElementById('c2').innerHTML = "内页接受信息"+data;    
			};    
			if (typeof window.addEventListener != 'undefined') {    
			  window.addEventListener('message', onmessage, false);    
			} else if (typeof window.attachEvent != 'undefined') {    
			  window.attachEvent('onmessage', onmessage);    
			}  
		</script>
	</body>
</html>
